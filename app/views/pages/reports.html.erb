<div class="rc-shell">
  <%= render "components/iphone_frame" do %>
    <div class="p-4">

      <h2 class="h5 fw-bold mb-1">Relatórios</h2>
      <p class="text-muted small mb-4">
        Uma visão geral da sua rotina de cuidado.
      </p>

      <div class="d-flex flex-column gap-3">

        <div class="rc-card bg-white rounded-4 shadow-sm p-3">
          <div class="d-flex justify-content-between align-items-center">
            <span class="fw-semibold">Pacientes cadastrados</span>
            <span class="badge bg-primary-subtle text-primary">
              <%= @total_patients %>
            </span>
          </div>
        </div>

        <% if @total_medications.present? %>
          <div class="rc-card bg-white rounded-4 shadow-sm p-3">
            <div class="d-flex justify-content-between align-items-center">
              <span class="fw-semibold">Medicações registradas</span>
              <span class="badge bg-success-subtle text-success">
                <%= @total_medications %>
              </span>
            </div>
          </div>
        <% end %>

        <% if @upcoming_appointments.present? && @upcoming_appointments.any? %>
          <div class="rc-card bg-white rounded-4 shadow-sm p-3">
            <h6 class="fw-bold mb-2">Próximos atendimentos</h6>
            <ul class="list-unstyled mb-0 small">
              <% @upcoming_appointments.each do |appt| %>
                <li class="mb-1">
                  • Atendimento #<%= appt.id %>
                  <span class="text-muted">
                    (criado em <%= l(appt.created_at.to_date) %>)
                  </span>
                </li>
              <% end %>
            </ul>
          </div>
        <% else %>
          <p class="text-muted small mb-0">
            Nenhum atendimento futuro cadastrado ainda.
          </p>
        <% end %>
      </div>

    </div>
  <% end %>
</div>
