<%# app/views/components/_nav_link_deluxe.html.erb %>
<%# Locals:
# label:        String (ex: "Pacientes")
# path:         Route  (ex: patients_path)
# icon_emoji:   String (ex: "üë•")
# icon_image:   String (ex: "ui/patients.png")
# active_class: String (extra classe quando ativo)
# class_name:   String (classe base)
%>

<%
  is_active = current_page?(path)

  base_classes = "d-flex flex-column align-items-center justify-content-center text-center"
  base_classes += " px-3 py-2 rounded-4 transition-all"

  active_styles = is_active ? "color: #198754; transform: scale(1.1);" : "opacity: 0.6;"
%>

<%= link_to path, class: [base_classes, class_name].compact.join(" "), style: active_styles do %>

  <!-- √çCONE -->
  <div class="rounded-circle d-flex align-items-center justify-content-center mb-1"
       style="width: 42px; height: 42px;
              background-color:<%= is_active ? '#D1F5E1' : 'rgba(0,0,0,0.05)' %>;
              transition: all 0.3s ease;">

    <% if icon_image.present? %>
      <%= image_tag icon_image,
                    alt: label,
                    style: "width: 22px; height: 22px; object-fit: contain;" %>

    <% elsif icon_emoji.present? %>
      <span style="font-size: 20px;"><%= icon_emoji %></span>

    <% else %>
      <span style="font-size: 18px;">‚≠ê</span>
    <% end %>
  </div>

  <!-- TEXTO -->
  <span class="small fw-semibold"
        style="line-height: 1; <%= is_active ? 'color:#198754;' : 'color:#666;' %>">
    <%= label %>
  </span>
<% end %>
